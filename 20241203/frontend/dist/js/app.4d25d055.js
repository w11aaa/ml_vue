(function(){var t={7191:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return c}});var a=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"about-container card"},[e("h1",[t._v("关于股票信息展示及预测系统")]),e("p",[t._v(" 本项目是一个基于Vue.js构建的前端应用，旨在提供一个现代化、用户友好的界面，用于展示股票数据并提供基于机器学习的价格预测功能。 ")]),e("p",[t._v(" 后端采用轻量级的Python Flask框架，通过SQLAlchemy连接MySQL数据库，为前端提供稳定、高效的数据接口。前端通过Axios与后端进行异步通信，并使用ECharts库进行专业的数据可视化。 ")]),e("h2",[t._v("核心技术栈")]),e("div",{staticClass:"tech-stack"},[e("div",{staticClass:"tech-item"},[e("strong",[t._v("前端:")]),t._v(" Vue.js, Vue Router, Vuex, Axios, ECharts")]),e("div",{staticClass:"tech-item"},[e("strong",[t._v("后端:")]),t._v(" Python, Flask, SQLAlchemy, Pandas")]),e("div",{staticClass:"tech-item"},[e("strong",[t._v("数据库:")]),t._v(" MySQL")])])])}],r=s(1656),n={},o=(0,r.A)(n,a,i,!1,null,"7ec6452d",null),c=o.exports},8067:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"auth-container"},[e("div",{staticClass:"auth-card"},[e("h2",[t._v("登录您的账户")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("用户名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"username",required:"",placeholder:"请输入用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"password"}},[t._v("密码")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password",required:"",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t.error?e("p",{staticClass:"error-message"},[t._v(t._s(t.error))]):t._e(),e("button",{staticClass:"submit-btn",attrs:{type:"submit",disabled:t.isLoading}},[t.isLoading?e("span",[t._v("登录中...")]):e("span",[t._v("登录")])])]),e("div",{staticClass:"switch-link"},[t._v(" 还没有账户? "),e("router-link",{attrs:{to:"/register"}},[t._v("立即注册")])],1)])])},i=[],r=(s(4114),{data(){return{username:"",password:"",isLoading:!1,error:""}},methods:{async handleLogin(){this.isLoading=!0,this.error="";try{await this.$store.dispatch("login",{username:this.username,password:this.password}),this.$router.push("/")}catch(t){this.error=t.message||"登录失败，请稍后重试。"}finally{this.isLoading=!1}}}}),n=r,o=s(1656),c=(0,o.A)(n,a,i,!1,null,"62a4e1d2",null),l=c.exports},2021:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"auth-container"},[e("div",{staticClass:"auth-card"},[e("h2",[t._v("创建新账户")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.handleRegister.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("用户名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"username",required:"",placeholder:"请输入用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"password"}},[t._v("密码")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password",required:"",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t.error?e("p",{staticClass:"error-message"},[t._v(t._s(t.error))]):t._e(),t.successMessage?e("p",{staticClass:"success-message"},[t._v(t._s(t.successMessage))]):t._e(),e("button",{staticClass:"submit-btn",attrs:{type:"submit",disabled:t.isLoading}},[t.isLoading?e("span",[t._v("注册中...")]):e("span",[t._v("注册")])])]),e("div",{staticClass:"switch-link"},[t._v(" 已有账户? "),e("router-link",{attrs:{to:"/login"}},[t._v("立即登录")])],1)])])},i=[],r=(s(4114),{data(){return{username:"",password:"",isLoading:!1,error:"",successMessage:""}},methods:{async handleRegister(){this.isLoading=!0,this.error="",this.successMessage="";try{await this.$axios.post("http://127.0.0.1:5000/api/register",{username:this.username,password:this.password}),this.successMessage="注册成功！正在跳转到登录页面...",setTimeout((()=>{this.$router.push("/login")}),2e3)}catch(t){this.error=t.response&&t.response.data.message||"注册失败，请稍后重试。"}finally{this.isLoading=!1}}}}),n=r,o=s(1656),c=(0,o.A)(n,a,i,!1,null,"3b69ec6c",null),l=c.exports},1519:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"kline-container"},[e("div",{staticClass:"header-section"},[e("div",{staticClass:"title-area"},[e("h2",[t._v(t._s(t.stockInfo.code)+" "+t._s(t.stockInfo.name)+" K线图")]),e("span",{staticClass:"watchlist-star",class:{"is-in-watchlist":t.isInWatchlist},attrs:{title:t.isInWatchlist?"从自选中移除":"添加到自选股"},on:{click:t.toggleWatchlist}},[t._v(" ★ ")]),e("button",{staticClass:"update-single-btn",attrs:{disabled:t.isUpdating},on:{click:t.updateCurrentStock}},[t.isUpdating?e("span",[t._v("更新中...")]):e("span",[t._v("更新数据")])])]),e("div",{staticClass:"controls-area"},["day"===t.activePeriod?e("div",{staticClass:"indicator-buttons"},[e("button",{class:{active:t.visibleIndicators.includes("MA5")},on:{click:function(e){return t.toggleIndicator("MA5")}}},[t._v("MA5")]),e("button",{class:{active:t.visibleIndicators.includes("MA10")},on:{click:function(e){return t.toggleIndicator("MA10")}}},[t._v("MA10")]),e("button",{class:{active:t.visibleIndicators.includes("MA20")},on:{click:function(e){return t.toggleIndicator("MA20")}}},[t._v("MA20")])]):t._e(),e("div",{staticClass:"period-buttons"},[e("button",{class:["period-btn","day"===t.activePeriod?"active":""],on:{click:function(e){return t.changePeriod("day")}}},[t._v("日线")]),e("button",{class:["period-btn","week"===t.activePeriod?"active":""],on:{click:function(e){return t.changePeriod("week")}}},[t._v("周线")]),e("button",{class:["period-btn","month"===t.activePeriod?"active":""],on:{click:function(e){return t.changePeriod("month")}}},[t._v("月线")])])])]),t.updateSingleMessage?e("p",{staticClass:"update-message"},[t._v(t._s(t.updateSingleMessage))]):t._e(),t.isLoading||t.error||!t.klineData.length?t._e():e("div",{staticClass:"stock-stats"},[e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("最新价")]),e("span",{staticClass:"stat-value",class:t.lastPrice>=t.lastOpen?"up":"down"},[t._v(t._s(t.lastPrice.toFixed(2)))])]),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("涨跌幅")]),e("span",{staticClass:"stat-value",class:t.changePercent>=0?"up":"down"},[t._v(t._s(t.changePercent>=0?"+":"")+t._s(t.changePercent.toFixed(2))+"%")])]),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("成交量")]),e("span",{staticClass:"stat-value"},[t._v(t._s(t.lastVolume.toLocaleString())+" 手")])]),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("今开")]),e("span",{staticClass:"stat-value"},[t._v(t._s(t.lastOpen.toFixed(2)))])]),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("最高")]),e("span",{staticClass:"stat-value"},[t._v(t._s(t.lastHigh.toFixed(2)))])]),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("最低")]),e("span",{staticClass:"stat-value"},[t._v(t._s(t.lastLow.toFixed(2)))])])]),t.isLoading?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"spinner"}),e("p",[t._v("加载K线数据中...")])]):t.error?e("div",{staticClass:"error-message"},[e("p",[t._v(t._s(t.error))]),e("button",{staticClass:"retry-btn",on:{click:t.fetchKlineData}},[t._v("重试")])]):t.klineData.length?e("div",{staticClass:"chart-container"},[e("div",{style:{width:"100%",height:"500px"},attrs:{id:"klineChart"}})]):e("div",{staticClass:"no-data"},[e("p",[t._v("未找到该股票的K线数据")])])])},i=[],r=(s(4114),s(8992),s(3949),s(1454),s(9041)),n={data(){return{chart:null,isLoading:!1,error:null,stockCode:"",stockInfo:{code:"",name:""},activePeriod:"day",klineData:[],dates:[],volumes:[],predictionData:[],lastPrice:0,lastOpen:0,lastHigh:0,lastLow:0,lastVolume:0,changePercent:0,colors:{up:"#dc2626",down:"#059669"},monthColors:{up:"#059669",down:"#dc2626"},isUpdating:!1,updateSingleMessage:"",indicatorData:{},visibleIndicators:["MA5","MA10","MA20"],isInWatchlist:!1}},watch:{"$route.query.stockCode":{handler(t){t&&t!==this.stockCode&&(this.stockCode=t,this.fetchKlineData(),this.checkWatchlistStatus())},immediate:!0},activePeriod(){this.fetchKlineData()}},created(){this.stockCode=this.$route.query.stockCode||"",this.stockCode||(this.error="未指定股票代码")},mounted(){window.addEventListener("resize",this.handleResize)},beforeDestroy(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{async fetchKlineData(){this.isLoading=!0,this.error=null,this.klineData=[],this.dates=[],this.volumes=[],this.predictionData=[],this.indicatorData={};try{const t=await this.$axios.get("http://127.0.0.1:5000/api/stockkline",{params:{stockCode:this.stockCode,period:this.activePeriod,pageSize:200}});if(!t.data)throw new Error("服务器返回空数据");this.stockInfo=t.data.stockInfo||{code:this.stockCode,name:"未知股票"},Array.isArray(t.data.predictionData)&&(this.predictionData=t.data.predictionData);const e=t.data.data;if(!Array.isArray(e)||0===e.length)return void(this.chart&&this.chart.clear());this.indicatorData={MA5:e.map((t=>t.SMA_5)),MA10:e.map((t=>t.SMA_10)),MA20:e.map((t=>t.SMA_20))},e.forEach((t=>{this.klineData.push([this.parseNumber(t.open),this.parseNumber(t.price),this.parseNumber(t.low),this.parseNumber(t.high)]),this.dates.push(t.date),this.volumes.push(this.parseNumber(t.volume))})),this.setLastData(),this.renderChart()}catch(t){this.error="加载K线数据失败: "+(t.message||"未知错误")}finally{this.isLoading=!1}},toggleIndicator(t){const e=this.visibleIndicators.indexOf(t);e>-1?this.visibleIndicators.splice(e,1):this.visibleIndicators.push(t),this.renderChart()},async updateCurrentStock(){this.isUpdating=!0,this.updateSingleMessage=`正在为 ${this.stockCode} 更新最新数据...`;try{await this.$axios.post("http://127.0.0.1:5000/api/update_stock",{stockCode:this.stockCode}),this.updateSingleMessage="后台更新任务已启动，等待2秒后自动刷新图表...",setTimeout((()=>{this.updateSingleMessage="",this.fetchKlineData()}),2e3)}catch(t){this.updateSingleMessage="更新失败，请检查后端服务。"}finally{setTimeout((()=>{this.isUpdating=!1}),2e3)}},async checkWatchlistStatus(){if(this.stockCode)try{const t=await this.$axios.get("/api/watchlist/status",{params:{stockCodes:this.stockCode}});this.isInWatchlist=t.data[this.stockCode]}catch(t){console.error("检查自选状态失败:",t)}},async toggleWatchlist(){try{this.isInWatchlist?await this.$axios.delete(`/api/watchlist/${this.stockCode}`):await this.$axios.post("/api/watchlist",{stockCode:this.stockCode}),this.isInWatchlist=!this.isInWatchlist}catch(t){alert("操作失败，请稍后再试")}},renderChart(){this.$nextTick((()=>{const t=document.getElementById("klineChart");if(!t)return;this.chart||(this.chart=r.Ts(t));const e="month"===this.activePeriod?this.monthColors:this.colors,s=this.predictionData&&this.predictionData.length>0,a=[],i={MA5:"#3498db",MA10:"#f1c40f",MA20:"#9b59b6"};this.visibleIndicators.forEach((t=>{this.indicatorData[t]&&a.push({name:t,type:"line",data:this.indicatorData[t],smooth:!0,symbol:"none",lineStyle:{color:i[t],width:1.5}})}));const n=s?this.predictionData.map((t=>t.date)):[],o=s?this.predictionData.map((t=>t.price)):[],c=[...this.dates,...n],l=this.klineData.length>0?this.klineData[this.klineData.length-1][1]:0,d=s?[...Array(this.dates.length-1).fill("-"),l,...o]:[],u=s&&this.dates.length>0?[{name:"预测起点",coord:[this.dates[this.dates.length-1],l],value:"预测",symbolOffset:[0,-20],label:{position:"top",color:"#fff",backgroundColor:"#663399",padding:[5,10],borderRadius:5},itemStyle:{color:"#663399"}}]:[],h={backgroundColor:"#fff",tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["K线","预测线",...this.visibleIndicators],top:10},grid:[{left:"10%",right:"8%",top:"15%",height:"50%"},{left:"10%",right:"8%",top:"70%",height:"15%"}],xAxis:[{type:"category",data:c,boundaryGap:!1,axisLabel:{interval:Math.ceil(c.length/10),rotate:30}},{type:"category",gridIndex:1,data:c,show:!1}],yAxis:[{type:"value",scale:!0,name:"价格",splitLine:{lineStyle:{color:"#eee"}}},{type:"value",gridIndex:1,scale:!0,show:!1}],series:[{name:"K线",type:"candlestick",data:this.klineData,itemStyle:{color:e.up,color0:e.down,borderColor:e.up,borderColor0:e.down},markPoint:{symbol:"pin",symbolSize:50,data:u}},{name:"成交量",type:"bar",xAxisIndex:1,yAxisIndex:1,data:this.volumes,itemStyle:{color:t=>{const[s,a]=this.klineData[t.dataIndex];return a>=s?e.up:e.down}}},...a,...s?[{name:"预测线",type:"line",data:d,smooth:!0,symbol:"none",lineStyle:{type:"dashed",color:"#663399",width:2}}]:[]],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:50,end:100},{type:"slider",xAxisIndex:[0,1],bottom:5}]};this.chart.setOption(h,{notMerge:!0})}))},parseNumber(t,e=0){const s=Number(t);return isNaN(s)?e:s},setLastData(){if(!this.klineData.length)return;const t=this.klineData[this.klineData.length-1];this.lastOpen=t[0],this.lastPrice=t[1],this.lastLow=t[2],this.lastHigh=t[3],this.lastVolume=this.volumes[this.volumes.length-1]||0,this.changePercent=this.lastOpen>0?(this.lastPrice-this.lastOpen)/this.lastOpen*100:0},changePeriod(t){this.activePeriod=t},handleResize(){this.chart&&this.chart.resize()}}},o=n,c=s(1656),l=(0,c.A)(o,a,i,!1,null,"c2c23480",null),d=l.exports},3430:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"stock-list-container"},[e("h1",[t._v("股票列表")]),e("div",{staticClass:"toolbar-container"},[e("div",{staticClass:"search-container"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKeyword,expression:"searchKeyword"}],attrs:{type:"text",placeholder:"输入股票代码或名称搜索"},domProps:{value:t.searchKeyword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchStockList(1)},input:function(e){e.target.composing||(t.searchKeyword=e.target.value)}}}),e("button",{on:{click:function(e){return t.fetchStockList(1)}}},[t._v("搜索")])]),e("button",{staticClass:"update-all-btn",attrs:{disabled:t.isUpdatingAll},on:{click:t.updateAllStocks}},[t.isUpdatingAll?e("span",[t._v("更新进行中...")]):e("span",[t._v("全部更新")])])]),t.isUpdatingAll?e("div",{staticClass:"progress-container"},[e("div",{staticClass:"progress-bar-wrapper"},[e("div",{staticClass:"progress-bar",style:{width:t.progressPercentage+"%"}})]),e("div",{staticClass:"progress-text"},[t._v(t._s(t.updateMessage)+" ("+t._s(t.updateProgress)+"/"+t._s(t.updateTotal)+") - "+t._s(t.progressPercentage.toFixed(1))+"%")])]):e("p",{staticClass:"update-message-placeholder"}),t.isLoading?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"spinner"}),e("p",[t._v("加载股票数据中...")])]):t.error?e("div",{staticClass:"error-message"},[e("p",[t._v(t._s(t.error))]),e("button",{staticClass:"retry-btn",on:{click:function(e){return t.fetchStockList(t.currentPage)}}},[t._v("重试")])]):t.stocks.length?e("table",{staticClass:"stock-table"},[t._m(0),e("tbody",t._l(t.stocks,(function(s){return e("tr",{key:s.code,staticClass:"stock-item",on:{click:function(e){return t.goToChart(s.code)}}},[e("td",[t._v(t._s(s.code))]),e("td",[t._v(t._s(s.name))]),e("td",{class:s.price>=s.prevPrice?"up":"down"},[t._v(t._s(s.price.toFixed(2)))]),e("td",{class:s.changePercent>=0?"up":"down"},[t._v(t._s(s.changePercent>=0?"+":"")+t._s(s.changePercent.toFixed(2))+"%")]),e("td",[t._v(t._s(s.volume||"0.00"))]),e("td",[e("button",{staticClass:"detail-btn",on:{click:function(e){return e.stopPropagation(),t.goToChart(s.code)}}},[t._v("查看详情")])])])})),0)]):e("div",{staticClass:"no-data"},[e("p",[t._v("未找到股票数据")])]),t.pagination.totalPages>1&&!t.isLoading&&!t.error?e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:t.currentPage<=1},on:{click:function(e){return t.fetchStockList(t.currentPage-1)}}},[t._v("上一页")]),t._l(t.visiblePageNumbers,(function(s){return e("button",{key:s,class:{active:t.currentPage===s},on:{click:function(e){return t.fetchStockList(s)}}},[t._v(t._s(s))])})),t.currentPage+4<t.pagination.totalPages?e("span",[t._v("...")]):t._e(),e("button",{attrs:{disabled:t.currentPage>=t.pagination.totalPages},on:{click:function(e){return t.fetchStockList(t.currentPage+1)}}},[t._v("下一页")]),e("span",{staticClass:"total-pages"},[t._v("共 "+t._s(t.pagination.totalPages)+" 页")])],2):t._e()])},i=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("股票代码")]),e("th",[t._v("股票名称")]),e("th",[t._v("最新价格")]),e("th",[t._v("涨跌幅")]),e("th",[t._v("成交量（万手）")]),e("th",[t._v("操作")])])])}],r=(s(4114),s(1454),{data(){return{stocks:[],isLoading:!1,error:null,currentPage:1,pageSize:20,pagination:{has_more:!1,total:0,totalPages:0},searchKeyword:"",isUpdatingAll:!1,updateProgress:0,updateTotal:0,updateMessage:"",updateInterval:null}},created(){this.fetchStockList(1)},computed:{visiblePageNumbers(){const t=[],e=this.currentPage,s=Math.min(this.currentPage+4,this.pagination.totalPages);for(let a=e;a<=s;a++)t.push(a);return t},progressPercentage(){return 0===this.updateTotal?0:this.updateProgress/this.updateTotal*100}},methods:{async fetchStockList(t){if(!(t<1||t>this.pagination.totalPages&&this.pagination.totalPages>0)){this.isLoading=!0,this.error=null,this.currentPage=t;try{const e={page:t,pageSize:this.pageSize};this.searchKeyword&&(e.keyword=this.searchKeyword);const s=await this.$axios.get("http://127.0.0.1:5000/api/stocklist",{params:e});s.data&&Array.isArray(s.data.data)?(this.stocks=s.data.data.map((t=>({...t,price:parseFloat(t.price)||0,prevPrice:parseFloat(t.prevPrice)||0,changePercent:parseFloat(t.changePercent)||0}))),this.pagination=s.data.pagination):(this.stocks=[],this.pagination={has_more:!1,total:0,totalPages:0})}catch(e){this.error="获取股票列表失败: "+(e.message||"网络错误")}finally{this.isLoading=!1}}},goToChart(t){t&&this.$router.push({name:"StockChart",query:{stockCode:t}})},async updateAllStocks(){if(!this.isUpdatingAll&&confirm("“全部更新”可能需要较长时间，确定要开始吗？"))try{await this.$axios.post("http://127.0.0.1:5000/api/update_all_stocks"),this.isUpdatingAll=!0,this.updateMessage="任务已启动，正在连接...",this.updateInterval=setInterval(this.checkUpdateStatus,1500)}catch(t){t.response&&409===t.response.status?alert("启动失败：已有更新任务正在运行中。"):alert("启动全部更新任务失败，请检查后端服务。")}},async checkUpdateStatus(){try{const t=await this.$axios.get("http://127.0.0.1:5000/api/update_status"),e=t.data;this.updateProgress=e.progress,this.updateTotal=e.total,this.updateMessage=e.message,e.running||(clearInterval(this.updateInterval),this.updateInterval=null,this.updateMessage=e.message||"更新完成！",setTimeout((()=>{this.isUpdatingAll=!1,this.fetchStockList(1)}),3e3))}catch(t){clearInterval(this.updateInterval),this.updateInterval=null,this.isUpdatingAll=!1,alert("与服务器断开连接，已停止查询更新状态。")}}},beforeDestroy(){this.updateInterval&&clearInterval(this.updateInterval)}}),n=r,o=s(1656),c=(0,o.A)(n,a,i,!1,null,"1cfdff7a",null),l=c.exports},5263:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"stock-list-container"},[e("h1",[t._v("我的自选股")]),t.isLoading?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"spinner"}),e("p",[t._v("加载自选股列表中...")])]):t.error?e("div",{staticClass:"error-message"},[e("p",[t._v(t._s(t.error))])]):t.stocks.length?e("table",{staticClass:"stock-table"},[t._m(0),e("tbody",t._l(t.stocks,(function(s){return e("tr",{key:s.code,staticClass:"stock-item",on:{click:function(e){return t.goToChart(s.code)}}},[e("td",[t._v(t._s(s.code))]),e("td",[t._v(t._s(s.name))]),e("td",{class:s.price>=s.prevPrice?"up":"down"},[t._v(t._s(s.price.toFixed(2)))]),e("td",{class:s.changePercent>=0?"up":"down"},[t._v(t._s(s.changePercent.toFixed(2))+"%")]),e("td",[t._v(t._s((s.volume||0).toFixed(2)))]),e("td",[e("button",{staticClass:"detail-btn remove",on:{click:function(e){return e.stopPropagation(),t.removeFromWatchlist(s.code)}}},[t._v("移除自选")])])])})),0)]):e("div",{staticClass:"no-data"},[e("p",[t._v("您的自选股列表为空，请在“个股行情”或K线图页面添加。")])])])},i=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("股票代码")]),e("th",[t._v("股票名称")]),e("th",[t._v("最新价格")]),e("th",[t._v("涨跌幅")]),e("th",[t._v("成交量（万手）")]),e("th",[t._v("操作")])])])}],r=(s(4114),s(8992),s(4520),s(1454),{data(){return{stocks:[],isLoading:!1,error:null}},created(){this.fetchWatchlist()},methods:{async fetchWatchlist(){this.isLoading=!0,this.error=null;try{const t=await this.$axios.get("http://127.0.0.1:5000/api/watchlist");this.stocks=t.data.map((t=>({...t,price:parseFloat(t.price)||0,prevPrice:parseFloat(t.prevPrice)||0,changePercent:parseFloat(t.changePercent)||0})))}catch(t){this.error="加载自选股列表失败，请重新登录或稍后再试。"}finally{this.isLoading=!1}},goToChart(t){this.$router.push({name:"StockChart",query:{stockCode:t}})},async removeFromWatchlist(t){if(confirm(`确定要从自选中移除 ${t} 吗？`))try{await this.$axios.delete(`http://127.0.0.1:5000/api/watchlist/${t}`),this.stocks=this.stocks.filter((e=>e.code!==t))}catch(e){alert("移除失败，请稍后再试。")}}}}),n=r,o=s(1656),c=(0,o.A)(n,a,i,!1,null,"01b04e1f",null),l=c.exports},5711:function(t,e,s){"use strict";var a=s(6848),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app-container"}},[e("div",{staticClass:"background-overlay"}),e("div",{attrs:{id:"app"}},[e("navbar"),e("div",{staticClass:"main-content-wrapper"},[e("div",{staticClass:"left-sidebar-container"},[e("leftnavbar")],1),e("div",{staticClass:"right-content-area"},[e("router-view")],1)])],1)])},r=[],n={components:{navbar:()=>s.e(521).then(s.bind(s,2521)),leftnavbar:()=>s.e(537).then(s.bind(s,9537))}},o=n,c=s(1656),l=(0,c.A)(o,i,r,!1,null,null,null),d=l.exports,u=(s(8992),s(7550),s(6178)),h=s(3430),p=s(1519),v=s(8067),g=s(2021),m=s(5263),f=s(7191),_=s(3518),k=s(4373);a.Ay.use(_.Ay);var b=new _.Ay.Store({state:{menus:[],token:localStorage.getItem("token")||"",username:localStorage.getItem("username")||""},getters:{getMenus(t){return t.menus},isAuthenticated:t=>!!t.token,getUsername:t=>t.username},mutations:{setMenus(t,e){t.menus=e},AUTH_SUCCESS(t,{token:e,username:s}){t.token=e,t.username=s},LOGOUT(t){t.token="",t.username=""}},actions:{async login({commit:t},e){try{const s=await k.A.post("http://127.0.0.1:5000/api/login",e),{token:a,username:i}=s.data;localStorage.setItem("token",a),localStorage.setItem("username",i),k.A.defaults.headers.common["Authorization"]=`Bearer ${a}`,t("AUTH_SUCCESS",{token:a,username:i})}catch(s){throw localStorage.removeItem("token"),localStorage.removeItem("username"),t("LOGOUT"),s.response&&s.response.data||{message:"登录请求失败"}}},logout({commit:t}){localStorage.removeItem("token"),localStorage.removeItem("username"),delete k.A.defaults.headers.common["Authorization"],t("LOGOUT")}},modules:{}});a.Ay.use(u.Ay);const y=[{path:"/",name:"StockList",component:h["default"],meta:{requiresAuth:!0}},{path:"/chart",name:"StockChart",component:p["default"],props:t=>({stockCode:t.query.stockCode}),meta:{requiresAuth:!0}},{path:"/watchlist",name:"Watchlist",component:m["default"],meta:{requiresAuth:!0}},{path:"/about",name:"About",component:f["default"],meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:v["default"]},{path:"/register",name:"Register",component:g["default"]},{path:"*",redirect:"/"}],C=new u.Ay({mode:"history",base:"/",routes:y});C.beforeEach(((t,e,s)=>{const a=b.getters.isAuthenticated;t.matched.some((t=>t.meta.requiresAuth))&&!a?s("/login"):s()}));var w=C;s(4114);function A(t,e,a){let i=this.$route.path.replace("/","");i!=t&&(w.addRoute({path:"/"+t,component:()=>s(9555)("./"+t)}),w.push({path:t,query:e}),document.title=a)}a.Ay.prototype.$axios=k.A,a.Ay.config.productionTip=!1,a.Ay.prototype.to=A,k.A.interceptors.request.use((t=>{const e=localStorage.getItem("token");return e&&(t.headers["Authorization"]=`Bearer ${e}`),t}),(t=>Promise.reject(t))),new a.Ay({router:w,store:b,render:t=>t(d)}).$mount("#app")},9555:function(t,e,s){var a={"./About":[7191],"./About.vue":[7191],"./Left":[9537,537],"./Left.vue":[9537,537],"./Login":[8067],"./Login.vue":[8067],"./Navbar":[2521,521],"./Navbar.vue":[2521,521],"./Register":[2021],"./Register.vue":[2021],"./Shenqing":[4505,505],"./Shenqing.vue":[4505,505],"./StockChart":[1519],"./StockChart.vue":[1519],"./StockList":[3430],"./StockList.vue":[3430],"./StockPredict":[9637,637],"./StockPredict.vue":[9637,637],"./Table1":[3051,51],"./Table1.vue":[3051,51],"./Table2":[4516,516],"./Table2.vue":[4516,516],"./Test":[8042,42],"./Test.vue":[8042,42],"./Watchlist":[5263],"./Watchlist.vue":[5263]};function i(t){if(!s.o(a,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],i=e[0];return Promise.all(e.slice(1).map(s.e)).then((function(){return s(i)}))}i.keys=function(){return Object.keys(a)},i.id=9555,t.exports=i}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,r){if(!a){var n=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],r=t[d][2];for(var o=!0,c=0;c<a.length;c++)(!1&r||n>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(o=!1,r<n&&(n=r));if(o){t.splice(d--,1);var l=i();void 0!==l&&(e=l)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,i,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,a){return s.f[a](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/"+t+"."+{42:"f83c5820",51:"f3889b3a",505:"154395f3",516:"ee9aeadd",521:"8003a989",537:"44cddd8c",637:"ccaabd25"}[t]+".js"}}(),function(){s.miniCssF=function(t){return"css/"+t+"."+{51:"c30134bd",516:"79be14cb",521:"64d85c9b",537:"7251eca7",637:"1e894051"}[t]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="20241203:";s.l=function(a,i,r,n){if(t[a])t[a].push(i);else{var o,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==e+r){o=u;break}}o||(c=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",e+r),o.src=a),t[a]=[i];var h=function(e,s){o.onerror=o.onload=null,clearTimeout(p);var i=t[a];if(delete t[a],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,a,i,r){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",s.nc&&(n.nonce=s.nc);var o=function(s){if(n.onerror=n.onload=null,"load"===s.type)i();else{var a=s&&s.type,o=s&&s.target&&s.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+a+": "+o+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=o,n.parentNode&&n.parentNode.removeChild(n),r(c)}};return n.onerror=n.onload=o,n.href=e,a?a.parentNode.insertBefore(n,a.nextSibling):document.head.appendChild(n),n},e=function(t,e){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var i=s[a],r=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(r===t||r===e))return i}var n=document.getElementsByTagName("style");for(a=0;a<n.length;a++){i=n[a],r=i.getAttribute("data-href");if(r===t||r===e)return i}},a=function(a){return new Promise((function(i,r){var n=s.miniCssF(a),o=s.p+n;if(e(n,o))return i();t(a,o,null,i,r)}))},i={524:0};s.f.miniCss=function(t,e){var s={51:1,516:1,521:1,537:1,637:1};i[t]?e.push(i[t]):0!==i[t]&&s[t]&&e.push(i[t]=a(t).then((function(){i[t]=0}),(function(e){throw delete i[t],e})))}}}(),function(){var t={524:0};s.f.j=function(e,a){var i=s.o(t,e)?t[e]:void 0;if(0!==i)if(i)a.push(i[2]);else{var r=new Promise((function(s,a){i=t[e]=[s,a]}));a.push(i[2]=r);var n=s.p+s.u(e),o=new Error,c=function(a){if(s.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var r=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",o.name="ChunkLoadError",o.type=r,o.request=n,i[1](o)}};s.l(n,c,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,r,n=a[0],o=a[1],c=a[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(c)var d=c(s)}for(e&&e(a);l<n.length;l++)r=n[l],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(d)},a=self["webpackChunk_20241203"]=self["webpackChunk_20241203"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(5711)}));a=s.O(a)})();
//# sourceMappingURL=app.4d25d055.js.map